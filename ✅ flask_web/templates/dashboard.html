<!DOCTYPE html>
<html>
<head>
    <title>DDoS Cluster Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>DDoS Cluster Dashboard</h1>

    <h2>ðŸ“¦ Cá»¥m DDoS Ä‘Ã£ bá»‹ cháº·n</h2>
    <table border="1">
        <tr>
            <th>Cluster ID</th>
            <th>Sá»‘ IP</th>
            <th>TTL TB</th>
            <th>Tá»•ng gÃ³i</th>
            <th>Tá»•ng size</th>
            <th>Timestamp</th>
            <th>IP</th>
        </tr>
        {% for c in clusters %}
        <tr>
            <td>{{ c.id }}</td>
            <td>{{ c.count }}</td>
            <td>{{ c.avg_ttl }}</td>
            <td>{{ c.total_pkt }}</td>
            <td>{{ c.total_size }}</td>
            <td>{{ c.timestamp }}</td>
            <td><pre>{{ c.ips | join('\n') }}</pre></td>
        </tr>
        {% endfor %}
    </table>

    <h2>ðŸ“Š Biá»ƒu Ä‘á»“ TTL trung bÃ¬nh theo cá»¥m</h2>
    <canvas id="ttlChart" width="400" height="150"></canvas>

    <h2>ðŸ“Š Biá»ƒu Ä‘á»“ Packet Count theo cá»¥m</h2>
    <canvas id="sizeChart" width="400" height="150"></canvas>

    <script>
        const ttlCtx = document.getElementById("ttlChart").getContext("2d");
        const ttlChart = new Chart(ttlCtx, {
            type: "bar",
            data: {
                labels: {{ ttl_labels | tojson }},
                datasets: [{
                    label: "TTL trung bÃ¬nh",
                    data: {{ ttl_values | tojson }},
                    backgroundColor: "rgba(54, 162, 235, 0.6)"
                }]
            }
        });

        const sizeCtx = document.getElementById("sizeChart").getContext("2d");
        const sizeChart = new Chart(sizeCtx, {
            type: "bar",
            data: {
                labels: {{ ttl_labels | tojson }},
                datasets: [{
                    label: "Tá»•ng gÃ³i tin",
                    data: {{ size_values | tojson }},
                    backgroundColor: "rgba(255, 99, 132, 0.6)"
                }]
            }
        });
    </script>
</body>
</html>
